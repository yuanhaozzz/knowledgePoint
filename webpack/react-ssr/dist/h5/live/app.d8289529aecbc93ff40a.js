(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{416:function(e,t,n){n(417),e.exports=n(776)},664:function(e,t,n){},756:function(e,t,n){},758:function(e,t,n){var a={"./af":277,"./af.js":277,"./ar":278,"./ar-dz":279,"./ar-dz.js":279,"./ar-kw":280,"./ar-kw.js":280,"./ar-ly":281,"./ar-ly.js":281,"./ar-ma":282,"./ar-ma.js":282,"./ar-sa":283,"./ar-sa.js":283,"./ar-tn":284,"./ar-tn.js":284,"./ar.js":278,"./az":285,"./az.js":285,"./be":286,"./be.js":286,"./bg":287,"./bg.js":287,"./bm":288,"./bm.js":288,"./bn":289,"./bn.js":289,"./bo":290,"./bo.js":290,"./br":291,"./br.js":291,"./bs":292,"./bs.js":292,"./ca":293,"./ca.js":293,"./cs":294,"./cs.js":294,"./cv":295,"./cv.js":295,"./cy":296,"./cy.js":296,"./da":297,"./da.js":297,"./de":298,"./de-at":299,"./de-at.js":299,"./de-ch":300,"./de-ch.js":300,"./de.js":298,"./dv":301,"./dv.js":301,"./el":302,"./el.js":302,"./en-SG":303,"./en-SG.js":303,"./en-au":304,"./en-au.js":304,"./en-ca":305,"./en-ca.js":305,"./en-gb":306,"./en-gb.js":306,"./en-ie":307,"./en-ie.js":307,"./en-il":308,"./en-il.js":308,"./en-nz":309,"./en-nz.js":309,"./eo":310,"./eo.js":310,"./es":311,"./es-do":312,"./es-do.js":312,"./es-us":313,"./es-us.js":313,"./es.js":311,"./et":314,"./et.js":314,"./eu":315,"./eu.js":315,"./fa":316,"./fa.js":316,"./fi":317,"./fi.js":317,"./fo":318,"./fo.js":318,"./fr":319,"./fr-ca":320,"./fr-ca.js":320,"./fr-ch":321,"./fr-ch.js":321,"./fr.js":319,"./fy":322,"./fy.js":322,"./ga":323,"./ga.js":323,"./gd":324,"./gd.js":324,"./gl":325,"./gl.js":325,"./gom-latn":326,"./gom-latn.js":326,"./gu":327,"./gu.js":327,"./he":328,"./he.js":328,"./hi":329,"./hi.js":329,"./hr":330,"./hr.js":330,"./hu":331,"./hu.js":331,"./hy-am":332,"./hy-am.js":332,"./id":333,"./id.js":333,"./is":334,"./is.js":334,"./it":335,"./it-ch":336,"./it-ch.js":336,"./it.js":335,"./ja":337,"./ja.js":337,"./jv":338,"./jv.js":338,"./ka":339,"./ka.js":339,"./kk":340,"./kk.js":340,"./km":341,"./km.js":341,"./kn":342,"./kn.js":342,"./ko":343,"./ko.js":343,"./ku":344,"./ku.js":344,"./ky":345,"./ky.js":345,"./lb":346,"./lb.js":346,"./lo":347,"./lo.js":347,"./lt":348,"./lt.js":348,"./lv":349,"./lv.js":349,"./me":350,"./me.js":350,"./mi":351,"./mi.js":351,"./mk":352,"./mk.js":352,"./ml":353,"./ml.js":353,"./mn":354,"./mn.js":354,"./mr":355,"./mr.js":355,"./ms":356,"./ms-my":357,"./ms-my.js":357,"./ms.js":356,"./mt":358,"./mt.js":358,"./my":359,"./my.js":359,"./nb":360,"./nb.js":360,"./ne":361,"./ne.js":361,"./nl":362,"./nl-be":363,"./nl-be.js":363,"./nl.js":362,"./nn":364,"./nn.js":364,"./pa-in":365,"./pa-in.js":365,"./pl":366,"./pl.js":366,"./pt":367,"./pt-br":368,"./pt-br.js":368,"./pt.js":367,"./ro":369,"./ro.js":369,"./ru":370,"./ru.js":370,"./sd":371,"./sd.js":371,"./se":372,"./se.js":372,"./si":373,"./si.js":373,"./sk":374,"./sk.js":374,"./sl":375,"./sl.js":375,"./sq":376,"./sq.js":376,"./sr":377,"./sr-cyrl":378,"./sr-cyrl.js":378,"./sr.js":377,"./ss":379,"./ss.js":379,"./sv":380,"./sv.js":380,"./sw":381,"./sw.js":381,"./ta":382,"./ta.js":382,"./te":383,"./te.js":383,"./tet":384,"./tet.js":384,"./tg":385,"./tg.js":385,"./th":386,"./th.js":386,"./tl-ph":387,"./tl-ph.js":387,"./tlh":388,"./tlh.js":388,"./tr":389,"./tr.js":389,"./tzl":390,"./tzl.js":390,"./tzm":391,"./tzm-latn":392,"./tzm-latn.js":392,"./tzm.js":391,"./ug-cn":393,"./ug-cn.js":393,"./uk":394,"./uk.js":394,"./ur":395,"./ur.js":395,"./uz":396,"./uz-latn":397,"./uz-latn.js":397,"./uz.js":396,"./vi":398,"./vi.js":398,"./x-pseudo":399,"./x-pseudo.js":399,"./yo":400,"./yo.js":400,"./zh-cn":401,"./zh-cn.js":401,"./zh-hk":402,"./zh-hk.js":402,"./zh-tw":403,"./zh-tw.js":403};function s(e){var t=r(e);return n(t)}function r(e){if(n.o(a,e))return a[e];var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}s.keys=function(){return Object.keys(a)},s.resolve=r,(e.exports=s).id=758},767:function(e,t,n){},770:function(e,t,n){},771:function(e,t,n){},772:function(e,t,n){},774:function(e,t,n){},775:function(e,t,n){},776:function(e,t,n){"use strict";n.r(t);var i=n(0),c=n.n(i),a=n(8),s=n.n(a),r=n(123),o=n(75),l=n(214),u=n.n(l),d=(n(188),n(78)),m=(n(189),n(45)),f=(n(778),n(68)),p=(n(600),n(126)),h=(n(190),n(10)),g=n(36),y=n.n(g),v=n(37),j=n.n(v),b=n(38),S=n.n(b),w=n(39),E=n.n(w),I=n(18),O=n.n(I),N=n(40),k=n.n(N),C=n(12),D=n.n(C),M=n(33),T="SEND_COURSE_DETAIL",R="SHOW_DIALOG",U="HIDE_DIALOG",x="SELECT_STUDENT",P="COURSE_LIST",V=n(52),z=n.n(V),_=n(100),L=n.n(_),J=n(406),F=n.n(J),G=n(407),W=n.n(G),A=F.a.create({timeout:6e3});A.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded",A.interceptors.request.use(function(e){return console.log(e),"post"===e.method&&(e.data=W.a.stringify(e.data)),e},function(e){return loadinginstace.close(),Promise.reject(e)});var q=function(e,t,n){var s=2<arguments.length&&void 0!==n?n:{};return new Promise(function(n,a){A.post(e,t,s).then(function(e){var t=e.data.status.code;e.data.data.systemDate=e.data.systemDate,0===t?n(e.data.data):(console.log(e,"---------------------12"),d.a.error(e.data.status.message),a(e.data.message))}).catch(function(e,t){console.log(e,"-------------------err"),a(e,t)})})},H="";H="http://pre.beiwaiguoji.com/api";function $(e){return H+e}var B,Y,K,Q,X,Z={USER:{LOGINJUMP:$("/ucenter/dispatch?action=loginWithPassword"),SEND_CODE:$("/ucenter/dispatch?action=sendUserSms"),LOGIN_PHONE:$("/ucenter/dispatch?action=loginSms")}},ee={getUserInfo:(K=L()(z.a.mark(function e(t){return z.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q(Z.USER.LOGINJUMP,t,{});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)})),function(e){return K.apply(this,arguments)}),sendCode:(Y=L()(z.a.mark(function e(t){return z.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q(Z.USER.SEND_CODE,t,{});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)})),function(e){return Y.apply(this,arguments)}),getPhoneUserInfo:(B=L()(z.a.mark(function e(t){return z.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q(Z.USER.LOGIN_PHONE,t,{});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)})),function(e){return B.apply(this,arguments)})},te={calendar:{list:$("/live/dispatch?action=liveCalendar"),entryStudio:$("/live/dispatch?action=callbackNotify")}},ne={getList:(X=L()(z.a.mark(function e(t,n){return z.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q(te[t].list,n,{});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)})),function(e,t){return X.apply(this,arguments)}),sendStudioCallback:(Q=L()(z.a.mark(function e(t,n){return z.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q(te[t].entryStudio,n,{});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)})),function(e,t){return Q.apply(this,arguments)})};function ae(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,a)}return n}function se(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ae(n,!0).forEach(function(e){D()(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ae(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function re(e){return{type:T,payload:se({},e)}}function oe(e){return{type:"LOGIN",payload:se({},e)}}function ie(e){return{type:R,payload:se({},e)}}function ce(e){return{type:x,payload:se({},e)}}function le(e){return function(t){return ne.getList("calendar",e).then(function(e){t(function(e){return console.log(e,"---------------------------a"),{type:P,payload:se({},e)}}({courseList:e.calendarList}))})}}function ue(e,t){if(!e)return"";t=t||"yyyy-MM-dd hh:mm";var n=new Date(e);/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(n.getFullYear()+"").substr(4-RegExp.$1.length)));var a={"M+":n.getMonth()+1,"d+":n.getDate(),"h+":n.getHours(),"m+":n.getMinutes(),"s+":n.getSeconds()};for(var s in a)if(new RegExp("(".concat(s,")")).test(t)){var r=a[s]+"";t=t.replace(RegExp.$1,1===RegExp.$1.length?r:("00"+r).substr(r.length))}return t}function de(e,t,n){for(var a=0;a<e.length;a++)if(e[a][t]===n)return e[a];return!1}function me(e,t,n){var a=new Date,s=n;a.setTime(a.getTime()+24*s*3600*1e3),document.cookie=e+"="+t+";expires="+a.toGMTString()}function fe(){return window.WCRClassRoom&&window.WCRClassRoom.getClientType()}n(664);var pe=function(e){function t(e){var n;return y()(this,t),n=S()(this,E()(t).call(this,e)),D()(O()(n),"handleSubmit",function(e){e.preventDefault(),n.props.form.validateFields(function(e,t){e||n.props.handleSubmit("account",{loginName:t.username,password:t.password})})}),D()(O()(n),"switchMethod",function(e){n.props.switchMethod(2)}),n.state={loading:!1,info:{}},n}return k()(t,e),j()(t,[{key:"componentDidMount",value:function(){this.setState({info:JSON.parse(localStorage.getItem("info"))||{}})}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return c.a.createElement(f.a,{onSubmit:this.handleSubmit,className:"login-form"},c.a.createElement(f.a.Item,null,e("username",{initialValue:this.state.info.loginName||"",rules:[{required:!0,message:"请输入账号!"}]})(c.a.createElement(p.a,{prefix:c.a.createElement(h.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"用户名"}))),c.a.createElement(f.a.Item,null,e("password",{initialValue:this.state.info.password||"",rules:[{required:!0,message:"请输入密码！"}]})(c.a.createElement(p.a,{prefix:c.a.createElement(h.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"密码"}))),c.a.createElement("p",{className:"login-form-phone",onClick:this.switchMethod},"手机号登陆？"),c.a.createElement(f.a.Item,null,c.a.createElement(m.a,{type:"primary",block:!0,htmlType:"submit",loading:this.state.loading,className:"login-form-button"},"登录")))}}]),t}(i.Component),he=function(e){function t(e){var n;return y()(this,t),n=S()(this,E()(t).call(this,e)),D()(O()(n),"handleSubmit",function(e){e.preventDefault(),n.props.form.validateFields(function(e,t){e||n.props.handleSubmit("phone",{mobile:t.phone,smsCode:t.code})})}),D()(O()(n),"switchMethod",function(e){n.props.switchMethod(1)}),D()(O()(n),"sendCode",function(e){n.props.form.validateFields(["phone"],function(e){if(!e){n.setState(function(e){return{isSend:!0}});var t={mobile:n.props.form.getFieldValue("phone"),userSmsType:0,deviceType:1,deviceSerialNo:"pc"+n.props.uuid};ee.sendCode(t).then(function(e){n.setState({interval:setInterval(function(){n.setState(function(e,t){return{number:--e.number}}),57===n.state.number&&n.setState(function(e){return clearInterval(n.state.interval),{isSend:!1,number:60}})},1e3)})}).catch(function(e){n.setState(function(e){return{isSend:!1}})})}})}),D()(O()(n),"validatorPhone",function(e,t,n){console.log(t,"---");0===t.length?n("请输入手机号码"):/^1[3456789]\d{9}$/.test(t)||n("手机号码输入有误"),n()}),n.state={loading:!1,info:{},isSend:!1,number:60,interval:null,phone:""},n}return k()(t,e),j()(t,[{key:"render",value:function(){var a=this,e=this.props.form.getFieldDecorator,t=this.state,n=t.isSend,s=t.number;return c.a.createElement(f.a,{onSubmit:this.handleSubmit,className:"login-form"},c.a.createElement(f.a.Item,null,e("phone",{initialValue:this.state.phone||"",rules:[{validator:function(e,t,n){return a.validatorPhone(e,t,n)}}]})(c.a.createElement(p.a,{prefix:c.a.createElement(h.a,{type:"phone",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"手机号"}))),c.a.createElement(f.a.Item,null,e("code",{rules:[{required:!0,message:"请输入验证码!"}]})(c.a.createElement("div",{className:"flex-center phone-box"},c.a.createElement(p.a,{placeholder:"验证码"})," ",c.a.createElement(m.a,{type:"primary",onClick:this.sendCode,disabled:n},n?s+"s":"发送")))),c.a.createElement("p",{className:"login-form-phone",onClick:this.switchMethod},"账号密码登陆？"),c.a.createElement(f.a.Item,null,c.a.createElement(m.a,{type:"primary",block:!0,htmlType:"submit",loading:this.state.loading,className:"login-form-button"},"登录")))}}]),t}(i.Component),ge=function(e){function t(e){var r;return y()(this,t),r=S()(this,E()(t).call(this,e)),D()(O()(r),"handleSubmit",function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"account",s=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};r.props.form.validateFields(function(e){if(!e){r.setState({loading:!0}),localStorage.setItem("uuid",r.state.uuid);var t={deviceType:1,deviceSerialNo:"pc-"+r.state.uuid},n=ee.getUserInfo;"account"===a?(t.loginName=s.loginName,t.password=s.password):(t.mobile=s.mobile,t.smsCode=s.smsCode,n=ee.getPhoneUserInfo),n(t).then(function(e){var t=fe();if(1===e.userMessageVo.userType&&"student"===t)return d.a.error("请登录教师端！"),void r.setState({loading:!1});if(1!==e.userMessageVo.userType&&"teacher"===t)return d.a.error("请登录学生端！"),void r.setState({loading:!1});if(4===e.userMessageVo.userType&&0===e.userMessageVo.subUserInfoVoList.length)return d.a.error("您未添加学生"),void r.setState({loading:!1});r.setState({loading:!1});var n={};0<e.userMessageVo.subUserInfoVoList.length?(n.id=e.userMessageVo.subUserInfoVoList[0].userId,n.name=e.userMessageVo.subUserInfoVoList[0].userName,n.password="0",n.token=e.userMessageVo.loginToken,n.avatar="http://snsimg.ztjystore.cn/ztnew/ad/img/2019/07/05/1562295571719403.png",n.mobile=e.userMessageVo.subUserInfoVoList[0].mobile||"0",e.userMessageVo.subUserInfoVoList[0].select=!0,r.props.setStudent({studentInfo:e.userMessageVo.subUserInfoVoList[0]})):(n.id=e.userMessageVo.userId,n.name=e.userMessageVo.userName,n.password="0",n.token=e.userMessageVo.loginToken,n.avatar="http://snsimg.ztjystore.cn/ztnew/ad/img/2019/07/05/1562295571719403.png",n.mobile=e.userMessageVo.mobile||"0",r.props.setStudent({studentInfo:e.userMessageVo}),e.userMessageVo.select=!0);n.type={1:"teacher",2:"student",3:"student",4:"student"}[e.userMessageVo.userType]||"student",r.props.setUserInfo({userInfo:e.userMessageVo}),me("userInfo",encodeURI(JSON.stringify(e.userMessageVo)),30),localStorage.setItem("userInfo",JSON.stringify(e.userMessageVo)),localStorage.setItem("info",JSON.stringify({loginName:s.loginName,password:s.password})),r.props.history.push("/h5/live/broadcast/course")}).catch(function(e){r.setState({loading:!1})})}})}),D()(O()(r),"switchMethod",function(e){r.setState({loginType:e})}),r.state={loginType:1,info:{},uuid:""},r}return k()(t,e),j()(t,[{key:"componentDidMount",value:function(){this.setState({info:JSON.parse(localStorage.getItem("info"))||{},uuid:localStorage.getItem("uuid")?localStorage.getItem("uuid"):function(){for(var e=[],t="0123456789abcdef",n=0;n<36;n++)e[n]=t.substr(Math.floor(16*Math.random()),1);return e[14]="4",e[19]=t.substr(3&e[19]|8,1),e[8]=e[13]=e[18]=e[23]="-",e.join("")}()}),console.log(localStorage.getItem("info"))}},{key:"render",value:function(){var e=this.state.loginType;return c.a.createElement(i.Fragment,null,c.a.createElement("div",{className:"login-wrapper"},c.a.createElement("div",{className:"login-wrapper-layout"},c.a.createElement("div",{className:"login-logo"}),1===e&&c.a.createElement(pe,u()({handleSubmit:this.handleSubmit,switchMethod:this.switchMethod},this.props,{info:this.state.info})),2===e&&c.a.createElement(he,u()({handleSubmit:this.handleSubmit,uuid:this.state.uuid,switchMethod:this.switchMethod},this.props)))))}}]),t}(i.Component),ye=f.a.create({name:"normal_login"})(ge),ve=Object(M.connect)(null,{setUserInfo:oe,setStudent:ce})(ye),je=n(212),be=n.n(je),Se=(n(777),n(413)),we=(n(756),"");function Ee(){return c.a.createElement("div",{className:"calendar-header flex-center"},c.a.createElement("div",{className:"calendar-header-refresh flex-center",onClick:function(){window.webAdapter.reload()}},c.a.createElement(h.a,{type:"sync",style:{fontSize:"18px",color:"#5fa2ee"}})))}var Ie=function(e){function t(e){var r;return y()(this,t),r=S()(this,E()(t).call(this,e)),D()(O()(r),"filterMonthsCourse",function(t){var n=[];return r.props.courseData.forEach(function(e){ue(e.date,"yyyy-MM-dd")===t&&n.push(e)}),n}),D()(O()(r),"dateCellRender",function(e){var t=e.month()+1<10?"0"+(e.month()+1):e.month()+1,n=e.date()<10?"0"+e.date():e.date(),a=e.year(),s=r.filterMonthsCourse("".concat(a,"-").concat(t,"-").concat(n));return c.a.createElement("ul",{className:"events"},s.map(function(e){return c.a.createElement("div",{key:e.date,className:"date-item"})}))}),D()(O()(r),"onSelect",function(e){var t=e.month()+1<10?"0"+(e.month()+1):e.month()+1,n="".concat(e.year(),"-").concat(t,"-").concat(e.date()<10?"0"+e.date():e.date()),a=function(e,t,n){console.log(n);for(var a=0;a<e.length;a++)if(ue(e[a][t],"yyyy-MM-dd")===n)return e[a];return!1}(r.props.courseData,"date",n)||{};we===e.month()&&r.props.sendCourseDetail({courseData:a})}),D()(O()(r),"onPanelChange",function(e){r.props.changeDate(e)}),r}return k()(t,e),j()(t,[{key:"render",value:function(){return c.a.createElement(i.Fragment,null,c.a.createElement(Ee,null),c.a.createElement("div",{className:"calendar-wrapper"},c.a.createElement(Se.a,{onPanelChange:this.onPanelChange,onSelect:this.onSelect,dateCellRender:this.dateCellRender,fullscreen:!1,ref:"myInput",headerRender:function(e){var n=e.value,a=e.onChange;we=n.month();var t=n.year();return c.a.createElement("div",{style:{padding:10}},c.a.createElement("div",{className:"flex-center"},c.a.createElement("div",{className:"calendar-caret flex-center",onClick:function(){var e=we,t=n.clone();t.month(parseInt(--e,10)),a(t)}},c.a.createElement(h.a,{type:"caret-left",style:{fontSize:"20px",color:"#a9a9a9"}})),c.a.createElement("div",{className:"calendar-date"},"".concat(t,"年").concat(we+1,"月")),c.a.createElement("div",{className:"calendar-caret flex-center",onClick:function(){var e=we,t=n.clone();t.month(parseInt(++e,10)),a(t)}},c.a.createElement(h.a,{type:"caret-right",style:{fontSize:"20px",color:"#a9a9a9"}}))))}})))}}]),t}(i.Component),Oe=(Object(M.connect)(null,{sendCourseDetail:re})(Ie),n(1)),Ne=n.n(Oe),ke=(n(767),function(e){function n(e){var t;return y()(this,n),t=S()(this,E()(n).call(this,e)),D()(O()(t),"handleSignOut",function(){window.WCRClassRoom.setUser(""),Router.push("/broadcast/login")}),D()(O()(t),"handleSwitchStudent",function(){t.props.showDialog({status:!0})}),D()(O()(t),"handleAvatar",function(){}),D()(O()(t),"handleGender",function(e){return 1===e.gender?"http://snsimg.ztjystore.cn/1562303034TyAFquWFiu":2===e.gender?"http://snsimg.ztjystore.cn/ztnew/ad/img/2019/07/05/1562291591660101.jpg?imageView2/2/w/720":"http://snsimg.ztjystore.cn/article/2019/07/05/1562281563183957.jpg?imageView2/2/w/720"}),t.state={platform:""},t}return k()(n,e),j()(n,[{key:"componentDidMount",value:function(){this.setState({platform:fe()})}},{key:"render",value:function(){var e=de(this.props.studentInfo,"select",!0);return c.a.createElement("aside",{className:"sidebar-container"},c.a.createElement("div",{className:"sidebar-avatar",style:{background:"url(".concat(this.handleGender(e),") no-repeat")}}),c.a.createElement("div",{className:"sidebar-name"},e.userName),c.a.createElement("ul",{className:"nav"},c.a.createElement("li",{className:"nav-item"},c.a.createElement(h.a,{type:"calendar"}),c.a.createElement("div",{className:"nav-item-title"},"课程表")),"student"===this.state.platform&&c.a.createElement("li",{className:"nav-item",onClick:this.handleSwitchStudent},c.a.createElement(h.a,{type:"team"}),c.a.createElement("div",{className:"nav-item-title"},"切换学生")),c.a.createElement("li",{className:"nav-item",onClick:this.handleSignOut},c.a.createElement(h.a,{type:"logout"}),c.a.createElement("div",{className:"nav-item-title"},"退出登录"))))}}]),n}(i.Component));ke.propTypes={userInfo:Ne.a.object.isRequired},ke.defaultProps={userInfo:{}};Object(M.connect)(function(e){return{studentInfo:e.course.studentInfo}},{showDialog:ie})(ke),n(768);var Ce=n(414),De=(n(770),function(e){function t(e){var n;return y()(this,t),n=S()(this,E()(t).call(this,e)),D()(O()(n),"handleOk",function(e){}),D()(O()(n),"handleStudentInfo",function(t){t.select||n.props.handleDialogSwitchStudent(t.userId),n.state.students.map(function(e){e.select=!1,t.userId===e.userId&&(e.select=!0)});var e=JSON.parse(JSON.stringify(n.props.userInfo));e.subUserInfoVoList=JSON.parse(JSON.stringify(n.state.students)),n.props.setStudent({studentInfo:JSON.parse(JSON.stringify(n.state.students))}),me("userInfo",encodeURI(JSON.stringify(e)),30),localStorage.setItem("userInfo",JSON.stringify(e)),n.handleLogin(t),n.props.hideDialog({status:!1})}),D()(O()(n),"handleLogin",function(e){window.WCRClassRoom.setUser("");var t={id:e.userId,name:e.userName,password:"0",token:n.props.userInfo.loginToken,avatar:"http://snsimg.ztjystore.cn/ztnew/ad/img/2019/07/05/1562295571719403.png",mobile:e.mobile||0,type:"student"};window.WCRClassRoom.setUser(t)}),D()(O()(n),"handleGender",function(e){return 1===e.gender?"http://snsimg.ztjystore.cn/1562303034TyAFquWFiu":2===e.gender?"http://snsimg.ztjystore.cn/ztnew/ad/img/2019/07/05/1562291591660101.jpg?imageView2/2/w/720":"http://snsimg.ztjystore.cn/article/2019/07/05/1562281563183957.jpg?imageView2/2/w/720"}),D()(O()(n),"handleCancel",function(e){n.props.hideDialog({status:!1})}),n.state={loading:!1,students:[]},n}return k()(t,e),j()(t,[{key:"componentDidMount",value:function(){var e=JSON.parse(localStorage.getItem("userInfo")).subUserInfoVoList;this.setState({students:e})}},{key:"render",value:function(){var n=this;return c.a.createElement("div",null,c.a.createElement(Ce.a,{visible:this.props.status,title:"切换学生",onOk:this.handleOk,onCancel:this.handleCancel,width:"50%",footer:null},c.a.createElement("div",{className:"student"},this.state.students.map(function(e,t){return c.a.createElement("div",{key:t,className:"student-item",onClick:function(){return n.handleStudentInfo(e)}},c.a.createElement("div",{className:"student-item-avatar",style:{background:"url(".concat(n.handleGender(e),") no-repeat")}}),c.a.createElement("div",{className:"student-item-name"},e.userName),e.select&&c.a.createElement("div",{className:"student-item-icon"},"当前"))}))))}}]),t}(i.Component));Object(M.connect)(function(e){return{status:e.course.status}},{showDialog:ie,hideDialog:function(e){return{type:U,payload:se({},e)}},setStudent:ce})(De),n(771);function Me(){return c.a.createElement(i.Fragment,null,c.a.createElement("div",{className:"course-header flex-center"},"我的课程"))}function Te(e){var t=e.courseData,n=void 0===t?{}:t,r=(e.userInfo,e.clearInterval);function s(e,t){var n;return{text:{1:"待上课",2:"开课中",3:"已下课",4:"无效",5:"已失效"},color:(n={3:"#e2e2e2"},D()(n,"3","#e2e2e2"),D()(n,"5","#e2e2e2"),D()(n,"1","#a6d4f5"),D()(n,"2","#a6d4f5"),n),button:{1:"进入教室",2:"进入教室",3:"查看回放",4:"无效",5:"已失效"},type:{1:"0",2:"7",3:"2"},courseStatus:{1:1,2:2,3:3,4:-1,5:4}}[t][e]}function a(t){if(1===t.status||2===t.status||3===t.status){var n={institutionId:1014,id:t.id,title:t.title,scenario:s(t.classType,"type"),startTime:t.startTime,endTime:t.endTime,status:s(t.status,"courseStatus"),teacher_name:t.teacher.userName,teacher_id:t.teacher.id,lesson_slide_url:t.broadcastingInfo.lessonSlideUrl,lesson_slide_backup_url:t.broadcastingInfo.lessonSlideBackupUrl};t.actualStartTime&&(n.actualStartTime=t.actualStartTime),3===t.classType&&(n.needLianMai=1,n.record_mode=4),2===t.classType&&(n.students=[],t.broadcastingInfo.students.forEach(function(e){n.students.push({id:e.id,name:e.userName,avatar:e.avatar})}));var e=JSON.parse(localStorage.getItem("userInfo")),a={token:e.loginToken};0<e.subUserInfoVoList.length?a.subUserId=de(e.subUserInfoVoList,"select",!0).userId:a.subUserId=e.userId,console.log(JSON.stringify(a)),WCRClassRoom.joinClassRoom(JSON.stringify(n),function(e){!function(e,t,n){if("startClass"===e.notify){window.WCRClassRoom.web_log(JSON.stringify(e)),console.log("点击上课按钮"),console.log(n.subUserId);var a={token:n.token,subUserId:n.subUserId,notify:"startClass",data:JSON.stringify(e.body)};ne.sendStudioCallback("calendar",a).then(function(e){o({status:1,lesson:t.id,actual_time:t.actualStartTime?ue(t.actualStartTime,"yyyy-MM-dd hh:mm:ss"):ue(e.systemDate,"yyyy-MM-dd hh:mm:ss"),server_time:ue(e.systemDate,"yyyy-MM-dd hh:mm:ss"),notify:"startClass"}),console.log({status:1,lesson:t.id,actual_time:t.actualStartTime?ue(t.actualStartTime,"yyyy-MM-dd hh:mm:ss"):ue(e.systemDate,"yyyy-MM-dd hh:mm:ss"),server_time:ue(e.systemDate,"yyyy-MM-dd hh:mm:ss"),notify:"startClass",time:t.actualStartTime},"--------")}).catch(function(e){o({status:2,lesson:t.id,actual_time:t.actualStartTime?ue(t.actualStartTime,"yyyy-MM-dd hh:mm:ss"):ue(res.systemDate,"yyyy-MM-dd hh:mm:ss"),server_time:ue(res.systemDate,"yyyy-MM-dd hh:mm:ss"),notify:"startClass"})})}else if("endClass"===e.notify){WCRClassRoom.web_log(JSON.stringify(e)),console.log("点击下课按钮");var s={token:n.token,subUserId:n.subUserId,notify:"endClass",data:JSON.stringify(e.body)};ne.sendStudioCallback("calendar",s).then(function(e){o({status:1,lesson:t.id,notify:"endClass"})}).catch(function(e){o({status:2,lesson:t.id,notify:"endClass"})})}else"enterClassRoom"===e.notify?(r(),console.log("进入教室"),WCRClassRoom.web_log(JSON.stringify(e))):"leaveClassRoom"===e.notify?(WCRClassRoom.web_log(JSON.stringify(e)),window.webAdapter.reload(),console.log("离开教室")):"rewardinfo"===e.notify&&console.log(JSON.parse(JSON.stringify(e)))}(e,t,a)})}d.a.warning("该课程".concat(已失效))}function o(e){var t=0<arguments.length&&void 0!==e?e:{},n=t.status,a=t.lesson,s=t.actual_time,r=t.server_time,o=t.notify,i={notify:o,body:{status:n}};"startClass"===o&&(i.body.data={lesson:a,actual_time:s,server_time:r}),"endClass"===o&&(i.body.data={lesson:a}),window.WCRClassRoom.commonNotifyCallback(0,i)}return Object.keys(n).length<1?c.a.createElement(i.Fragment,null,c.a.createElement("div",{className:"no-data"},"暂无课程")):c.a.createElement("ul",{className:"list-item hide-scroll"},n.courseList.map(function(e){return c.a.createElement("li",{key:e.id},c.a.createElement("p",{className:"list-item-title"},e.title),c.a.createElement("p",{className:"list-item-type"},function(e){switch(e){case 1:return"一对一";case 2:return"小班课";case 3:return"大班课";case 4:return"广播课"}}(e.classType),"  ",ue(+new Date(e.startTime.replace(/-/g,"/")),"hh:mm"),"-",ue(+new Date(e.endTime.replace(/-/g,"/")),"hh:mm")),c.a.createElement("p",{className:"list-item-name"},e.teacher.userName),c.a.createElement("div",{className:"list-item-status",style:{backgroundColor:s(e.status,"color")}},s(e.status,"text")),c.a.createElement("dir",{className:"list-item-button"},c.a.createElement("button",{onClick:function(){return a(e)}},s(e.status,"button"))))}))}var Re=function(e){function t(e){return y()(this,t),S()(this,E()(t).call(this,e))}return k()(t,e),j()(t,[{key:"render",value:function(){var e=this.props,t=e.courseData,n=e.userInfo,a=e.clearInterval;return c.a.createElement(i.Fragment,null,c.a.createElement(Me,{userInfo:n}),c.a.createElement(Te,{userInfo:n,clearInterval:a,courseData:t}))}}]),t}(i.Component);Object(M.connect)(function(e){return{courseData:e.course.courseData}},null)(Re),n(772);function Ue(e,t){var n=new Date(e),a=n.getMonth()+1,s=n.getFullYear(),r=20;return"startDate"===t?0===--a&&(a=12,--s):(r=10,13===++a&&(a=1,++s)),"".concat(s,"-").concat(a<10?"0"+a:a,"-").concat(r)}var xe=function(e){function t(e){return y()(this,t),S()(this,E()(t).call(this,e))}return k()(t,e),j()(t,[{key:"render",value:function(){return c.a.createElement(i.Fragment,null,c.a.createElement("div",{className:"content-layout"},c.a.createElement("div",{className:"content-layout-right flex-center"},c.a.createElement("div",{className:"content-layout-right-box"},c.a.createElement("div",{className:"content-layout-right-caleandar"}),c.a.createElement("div",{className:"content-layout-right-course"})))))}}]),t}(i.Component),Pe=Object(M.connect)(function(e){var t=e.course,n=t.courseList;return{courseDataStore:t.courseData,courseListStore:n,userInfo:e.login.userInfo}},{sendCourseDetail:re,setStudent:ce,setUserInfo:oe})(xe);Pe.getInintalProps=function(e,t){var n=JSON.parse(t.userInfo);console.log(be()(n),"router----------------------"),console.log(n,"router----------------------"),e.dispatch(oe({userInfo:n}));var a={token:n.loginToken,startDate:Ue(new Date,"startDate"),endDate:Ue(new Date,"endDate")};return 0<n.subUserInfoVoList.length?a.subUserId=de(n.subUserInfoVoList,"select",!0).userId:a.subUserId=n.userId,console.log(a,"----------------2"),e.dispatch(le(a))};function Ve(){return c.a.createElement(i.Fragment,null,ze.map(function(e){return c.a.createElement(o.Route,e)}))}var ze=[{path:"/",component:ve,exact:!0,key:"Home"},{path:"/h5/live/broadcast/login",component:ve,key:"login",exact:!0},{path:"/h5/live/broadcast/course",component:Pe,key:"course",exact:!0,loadData:Pe.getInintalProps}],_e=n(66),Le=n(219);function Je(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,a)}return n}function Fe(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Je(n,!0).forEach(function(e){D()(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Je(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var Ge={courseData:{},status:!1,studentInfo:{},courseList:{}};function We(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,a)}return n}function Ae(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?We(n,!0).forEach(function(e){D()(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):We(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var qe={userInfo:null,list:[]},He=Object(_e.combineReducers)({course:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:Ge,t=1<arguments.length?arguments[1]:void 0;switch(t.type){case T:return Fe({},e,{},t.payload);case R:case U:case x:case P:return Fe({},e,{},t.payload);default:return e}},login:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:qe,t=1<arguments.length?arguments[1]:void 0;switch(t.type){case"LOGIN":t.payload;return Ae({},e,{},t.payload);case"TEST":return Ae({},e,{},t.payload);default:return e}}});function $e(){return c.a.createElement(M.Provider,{store:function(){var e=window._REACT_SOTRE?window._REACT_SOTRE:{};return Object(_e.createStore)(He,e,Object(_e.applyMiddleware)(Le.a))}()},c.a.createElement(r.BrowserRouter,null,c.a.createElement(Ve,null)))}n(774),n(775);s.a.hydrate(c.a.createElement($e,null),document.getElementById("root"))}},[[416,1,2]]]);