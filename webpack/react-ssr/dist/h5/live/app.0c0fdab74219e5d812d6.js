(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{415:function(e,t,n){n(416),e.exports=n(776)},664:function(e,t,n){},756:function(e,t,n){},758:function(e,t,n){var s={"./af":276,"./af.js":276,"./ar":277,"./ar-dz":278,"./ar-dz.js":278,"./ar-kw":279,"./ar-kw.js":279,"./ar-ly":280,"./ar-ly.js":280,"./ar-ma":281,"./ar-ma.js":281,"./ar-sa":282,"./ar-sa.js":282,"./ar-tn":283,"./ar-tn.js":283,"./ar.js":277,"./az":284,"./az.js":284,"./be":285,"./be.js":285,"./bg":286,"./bg.js":286,"./bm":287,"./bm.js":287,"./bn":288,"./bn.js":288,"./bo":289,"./bo.js":289,"./br":290,"./br.js":290,"./bs":291,"./bs.js":291,"./ca":292,"./ca.js":292,"./cs":293,"./cs.js":293,"./cv":294,"./cv.js":294,"./cy":295,"./cy.js":295,"./da":296,"./da.js":296,"./de":297,"./de-at":298,"./de-at.js":298,"./de-ch":299,"./de-ch.js":299,"./de.js":297,"./dv":300,"./dv.js":300,"./el":301,"./el.js":301,"./en-SG":302,"./en-SG.js":302,"./en-au":303,"./en-au.js":303,"./en-ca":304,"./en-ca.js":304,"./en-gb":305,"./en-gb.js":305,"./en-ie":306,"./en-ie.js":306,"./en-il":307,"./en-il.js":307,"./en-nz":308,"./en-nz.js":308,"./eo":309,"./eo.js":309,"./es":310,"./es-do":311,"./es-do.js":311,"./es-us":312,"./es-us.js":312,"./es.js":310,"./et":313,"./et.js":313,"./eu":314,"./eu.js":314,"./fa":315,"./fa.js":315,"./fi":316,"./fi.js":316,"./fo":317,"./fo.js":317,"./fr":318,"./fr-ca":319,"./fr-ca.js":319,"./fr-ch":320,"./fr-ch.js":320,"./fr.js":318,"./fy":321,"./fy.js":321,"./ga":322,"./ga.js":322,"./gd":323,"./gd.js":323,"./gl":324,"./gl.js":324,"./gom-latn":325,"./gom-latn.js":325,"./gu":326,"./gu.js":326,"./he":327,"./he.js":327,"./hi":328,"./hi.js":328,"./hr":329,"./hr.js":329,"./hu":330,"./hu.js":330,"./hy-am":331,"./hy-am.js":331,"./id":332,"./id.js":332,"./is":333,"./is.js":333,"./it":334,"./it-ch":335,"./it-ch.js":335,"./it.js":334,"./ja":336,"./ja.js":336,"./jv":337,"./jv.js":337,"./ka":338,"./ka.js":338,"./kk":339,"./kk.js":339,"./km":340,"./km.js":340,"./kn":341,"./kn.js":341,"./ko":342,"./ko.js":342,"./ku":343,"./ku.js":343,"./ky":344,"./ky.js":344,"./lb":345,"./lb.js":345,"./lo":346,"./lo.js":346,"./lt":347,"./lt.js":347,"./lv":348,"./lv.js":348,"./me":349,"./me.js":349,"./mi":350,"./mi.js":350,"./mk":351,"./mk.js":351,"./ml":352,"./ml.js":352,"./mn":353,"./mn.js":353,"./mr":354,"./mr.js":354,"./ms":355,"./ms-my":356,"./ms-my.js":356,"./ms.js":355,"./mt":357,"./mt.js":357,"./my":358,"./my.js":358,"./nb":359,"./nb.js":359,"./ne":360,"./ne.js":360,"./nl":361,"./nl-be":362,"./nl-be.js":362,"./nl.js":361,"./nn":363,"./nn.js":363,"./pa-in":364,"./pa-in.js":364,"./pl":365,"./pl.js":365,"./pt":366,"./pt-br":367,"./pt-br.js":367,"./pt.js":366,"./ro":368,"./ro.js":368,"./ru":369,"./ru.js":369,"./sd":370,"./sd.js":370,"./se":371,"./se.js":371,"./si":372,"./si.js":372,"./sk":373,"./sk.js":373,"./sl":374,"./sl.js":374,"./sq":375,"./sq.js":375,"./sr":376,"./sr-cyrl":377,"./sr-cyrl.js":377,"./sr.js":376,"./ss":378,"./ss.js":378,"./sv":379,"./sv.js":379,"./sw":380,"./sw.js":380,"./ta":381,"./ta.js":381,"./te":382,"./te.js":382,"./tet":383,"./tet.js":383,"./tg":384,"./tg.js":384,"./th":385,"./th.js":385,"./tl-ph":386,"./tl-ph.js":386,"./tlh":387,"./tlh.js":387,"./tr":388,"./tr.js":388,"./tzl":389,"./tzl.js":389,"./tzm":390,"./tzm-latn":391,"./tzm-latn.js":391,"./tzm.js":390,"./ug-cn":392,"./ug-cn.js":392,"./uk":393,"./uk.js":393,"./ur":394,"./ur.js":394,"./uz":395,"./uz-latn":396,"./uz-latn.js":396,"./uz.js":395,"./vi":397,"./vi.js":397,"./x-pseudo":398,"./x-pseudo.js":398,"./yo":399,"./yo.js":399,"./zh-cn":400,"./zh-cn.js":400,"./zh-hk":401,"./zh-hk.js":401,"./zh-tw":402,"./zh-tw.js":402};function a(e){var t=r(e);return n(t)}function r(e){if(n.o(s,e))return s[e];var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}a.keys=function(){return Object.keys(s)},a.resolve=r,(e.exports=a).id=758},767:function(e,t,n){},770:function(e,t,n){},771:function(e,t,n){},772:function(e,t,n){},774:function(e,t,n){},775:function(e,t,n){},776:function(e,t,n){"use strict";n.r(t);var i=n(0),c=n.n(i),s=n(8),a=n.n(s),r=n(123),o=n(76),l=n(213),u=n.n(l),d=(n(188),n(68)),m=(n(189),n(45)),f=(n(778),n(69)),p=(n(599),n(126)),h=(n(190),n(11)),g=n(36),y=n.n(g),v=n(37),b=n.n(v),j=n(38),S=n.n(j),w=n(39),I=n.n(w),E=n(13),D=n.n(E),k=n(40),O=n.n(k),N=n(10),C=n.n(N),M=n(33),T="SEND_COURSE_DETAIL",L="SHOW_DIALOG",U="HIDE_DIALOG",R="SELECT_STUDENT",V="COURSE_LIST",x=n(52),P=n.n(x),z=n(100),_=n.n(z),J=n(405),F=n.n(J),W=n(406),G=n.n(W),q=F.a.create({timeout:6e3});q.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded",q.interceptors.request.use(function(e){return console.log(e),"post"===e.method&&(e.data=G.a.stringify(e.data)),e},function(e){return loadinginstace.close(),Promise.reject(e)});var A=function(e,t,n){var a=2<arguments.length&&void 0!==n?n:{};return new Promise(function(n,s){q.post(e,t,a).then(function(e){var t=e.data.status.code;e.data.data.systemDate=e.data.systemDate,0===t?n(e.data.data):(d.a.error(e.data.status.message),s(e.data.message))}).catch(function(e,t){d.a.error(e.message),s(e,t)})})},H="alpha";H="http://dev.beiwaiguoji.com/api";function $(e){return H+e}var B,Y,K,Q,X,Z={USER:{LOGINJUMP:$("/ucenter/dispatch?action=loginWithPassword"),SEND_CODE:$("/ucenter/dispatch?action=sendUserSms"),LOGIN_PHONE:$("/ucenter/dispatch?action=loginSms")}},ee={getUserInfo:(K=_()(P.a.mark(function e(t){return P.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A(Z.USER.LOGINJUMP,t,{});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)})),function(e){return K.apply(this,arguments)}),sendCode:(Y=_()(P.a.mark(function e(t){return P.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A(Z.USER.SEND_CODE,t,{});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)})),function(e){return Y.apply(this,arguments)}),getPhoneUserInfo:(B=_()(P.a.mark(function e(t){return P.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A(Z.USER.LOGIN_PHONE,t,{});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)})),function(e){return B.apply(this,arguments)})},te={calendar:{list:$("/live/dispatch?action=liveCalendar"),entryStudio:$("/live/dispatch?action=callbackNotify")}},ne={getList:(X=_()(P.a.mark(function e(t,n){return P.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A(te[t].list,n,{});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)})),function(e,t){return X.apply(this,arguments)}),sendStudioCallback:(Q=_()(P.a.mark(function e(t,n){return P.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A(te[t].entryStudio,n,{});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)})),function(e,t){return Q.apply(this,arguments)})};function se(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,s)}return n}function ae(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?se(n,!0).forEach(function(e){C()(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):se(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function re(e){return{type:T,payload:ae({},e)}}function oe(e){return{type:"LOGIN",payload:ae({},e)}}function ie(e){return{type:L,payload:ae({},e)}}function ce(e){return{type:R,payload:ae({},e)}}function le(e){return function(t){return ne.getList("calendar",e).then(function(e){t(function(e){return{type:V,payload:ae({},e)}}({courseList:e.calendarList}))})}}function ue(e,t){if(!e)return"";t=t||"yyyy-MM-dd hh:mm";var n=new Date(e);/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(n.getFullYear()+"").substr(4-RegExp.$1.length)));var s={"M+":n.getMonth()+1,"d+":n.getDate(),"h+":n.getHours(),"m+":n.getMinutes(),"s+":n.getSeconds()};for(var a in s)if(new RegExp("(".concat(a,")")).test(t)){var r=s[a]+"";t=t.replace(RegExp.$1,1===RegExp.$1.length?r:("00"+r).substr(r.length))}return t}function de(e,t,n){console.log(n);for(var s=0;s<e.length;s++)if(ue(e[s][t],"yyyy-MM-dd")===n)return e[s];return!1}function me(e,t,n){for(var s=0;s<e.length;s++)if(e[s][t]===n)return e[s];return!1}function fe(e,t,n){var s=new Date,a=n;s.setTime(s.getTime()+24*a*3600*1e3),document.cookie=e+"="+t+";expires="+s.toGMTString()}function pe(){return window.WCRClassRoom&&window.WCRClassRoom.getClientType()}n(664);var he=function(e){function t(e){var n;return y()(this,t),n=S()(this,I()(t).call(this,e)),C()(D()(n),"handleSubmit",function(e){e.preventDefault(),n.props.form.validateFields(function(e,t){e||n.props.handleSubmit("account",{loginName:t.username,password:t.password})})}),C()(D()(n),"switchMethod",function(e){n.props.switchMethod(2)}),n.state={loading:!1,info:{}},n}return O()(t,e),b()(t,[{key:"componentDidMount",value:function(){this.setState({info:JSON.parse(localStorage.getItem("info"))||{}})}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return c.a.createElement(f.a,{onSubmit:this.handleSubmit,className:"login-form"},c.a.createElement(f.a.Item,null,e("username",{initialValue:this.state.info.loginName||"",rules:[{required:!0,message:"请输入账号!"}]})(c.a.createElement(p.a,{prefix:c.a.createElement(h.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"用户名"}))),c.a.createElement(f.a.Item,null,e("password",{initialValue:this.state.info.password||"",rules:[{required:!0,message:"请输入密码！"}]})(c.a.createElement(p.a,{prefix:c.a.createElement(h.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"密码"}))),c.a.createElement("p",{className:"login-form-phone",onClick:this.switchMethod},"手机号登陆？"),c.a.createElement(f.a.Item,null,c.a.createElement(m.a,{type:"primary",block:!0,htmlType:"submit",loading:this.state.loading,className:"login-form-button"},"登录")))}}]),t}(i.Component),ge=function(e){function t(e){var n;return y()(this,t),n=S()(this,I()(t).call(this,e)),C()(D()(n),"handleSubmit",function(e){e.preventDefault(),n.props.form.validateFields(function(e,t){e||n.props.handleSubmit("phone",{mobile:t.phone,smsCode:t.code})})}),C()(D()(n),"switchMethod",function(e){n.props.switchMethod(1)}),C()(D()(n),"sendCode",function(e){n.props.form.validateFields(["phone"],function(e){if(!e){n.setState(function(e){return{isSend:!0}});var t={mobile:n.props.form.getFieldValue("phone"),userSmsType:0,deviceType:1,deviceSerialNo:"pc"+n.props.uuid};ee.sendCode(t).then(function(e){n.setState({interval:setInterval(function(){n.setState(function(e,t){return{number:--e.number}}),57===n.state.number&&n.setState(function(e){return clearInterval(n.state.interval),{isSend:!1,number:60}})},1e3)})}).catch(function(e){n.setState(function(e){return{isSend:!1}})})}})}),C()(D()(n),"validatorPhone",function(e,t,n){console.log(t,"---");0===t.length?n("请输入手机号码"):/^1[3456789]\d{9}$/.test(t)||n("手机号码输入有误"),n()}),n.state={loading:!1,info:{},isSend:!1,number:60,interval:null,phone:""},n}return O()(t,e),b()(t,[{key:"render",value:function(){var s=this,e=this.props.form.getFieldDecorator,t=this.state,n=t.isSend,a=t.number;return c.a.createElement(f.a,{onSubmit:this.handleSubmit,className:"login-form"},c.a.createElement(f.a.Item,null,e("phone",{initialValue:this.state.phone||"",rules:[{validator:function(e,t,n){return s.validatorPhone(e,t,n)}}]})(c.a.createElement(p.a,{prefix:c.a.createElement(h.a,{type:"phone",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"手机号"}))),c.a.createElement(f.a.Item,null,e("code",{rules:[{required:!0,message:"请输入验证码!"}]})(c.a.createElement("div",{className:"flex-center phone-box"},c.a.createElement(p.a,{placeholder:"验证码"})," ",c.a.createElement(m.a,{type:"primary",onClick:this.sendCode,disabled:n},n?a+"s":"发送")))),c.a.createElement("p",{className:"login-form-phone",onClick:this.switchMethod},"账号密码登陆？"),c.a.createElement(f.a.Item,null,c.a.createElement(m.a,{type:"primary",block:!0,htmlType:"submit",loading:this.state.loading,className:"login-form-button"},"登录")))}}]),t}(i.Component),ye=function(e){function t(e){var r;return y()(this,t),r=S()(this,I()(t).call(this,e)),C()(D()(r),"handleSubmit",function(){var s=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"account",a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};r.props.form.validateFields(function(e){if(!e){r.setState({loading:!0}),localStorage.setItem("uuid",r.state.uuid);var t={deviceType:1,deviceSerialNo:"pc-"+r.state.uuid},n=ee.getUserInfo;"account"===s?(t.loginName=a.loginName,t.password=a.password):(t.mobile=a.mobile,t.smsCode=a.smsCode,n=ee.getPhoneUserInfo),n(t).then(function(e){var t=pe();if(1===e.userMessageVo.userType&&"student"===t)return d.a.error("请登录教师端！"),void r.setState({loading:!1});if(1!==e.userMessageVo.userType&&"teacher"===t)return d.a.error("请登录学生端！"),void r.setState({loading:!1});if(4===e.userMessageVo.userType&&0===e.userMessageVo.subUserInfoVoList.length)return d.a.error("您未添加学生"),void r.setState({loading:!1});r.setState({loading:!1});var n={};0<e.userMessageVo.subUserInfoVoList.length?(n.id=e.userMessageVo.subUserInfoVoList[0].userId,n.name=e.userMessageVo.subUserInfoVoList[0].userName,n.password="0",n.token=e.userMessageVo.loginToken,n.avatar="http://snsimg.ztjystore.cn/ztnew/ad/img/2019/07/05/1562295571719403.png",n.mobile=e.userMessageVo.subUserInfoVoList[0].mobile||"0",e.userMessageVo.subUserInfoVoList[0].select=!0,r.props.setStudent({studentInfo:e.userMessageVo.subUserInfoVoList[0]})):(n.id=e.userMessageVo.userId,n.name=e.userMessageVo.userName,n.password="0",n.token=e.userMessageVo.loginToken,n.avatar="http://snsimg.ztjystore.cn/ztnew/ad/img/2019/07/05/1562295571719403.png",n.mobile=e.userMessageVo.mobile||"0",r.props.setStudent({studentInfo:e.userMessageVo}),e.userMessageVo.select=!0);n.type={1:"teacher",2:"student",3:"student",4:"student"}[e.userMessageVo.userType]||"student",r.props.setUserInfo({userInfo:e.userMessageVo}),fe("userInfo",encodeURI(JSON.stringify(e.userMessageVo)),30),localStorage.setItem("userInfo",JSON.stringify(e.userMessageVo)),localStorage.setItem("info",JSON.stringify({loginName:a.loginName,password:a.password})),r.props.history.push("/h5/live/broadcast/course")}).catch(function(e){r.setState({loading:!1})})}})}),C()(D()(r),"switchMethod",function(e){r.setState({loginType:e})}),r.state={loginType:1,info:{},uuid:""},r}return O()(t,e),b()(t,[{key:"componentDidMount",value:function(){this.setState({info:JSON.parse(localStorage.getItem("info"))||{},uuid:localStorage.getItem("uuid")?localStorage.getItem("uuid"):function(){for(var e=[],t="0123456789abcdef",n=0;n<36;n++)e[n]=t.substr(Math.floor(16*Math.random()),1);return e[14]="4",e[19]=t.substr(3&e[19]|8,1),e[8]=e[13]=e[18]=e[23]="-",e.join("")}()}),console.log(localStorage.getItem("info"))}},{key:"render",value:function(){var e=this.state.loginType;return c.a.createElement(i.Fragment,null,c.a.createElement("div",{className:"login-wrapper"},c.a.createElement("div",{className:"login-wrapper-layout"},c.a.createElement("div",{className:"login-logo"}),1===e&&c.a.createElement(he,u()({handleSubmit:this.handleSubmit,switchMethod:this.switchMethod},this.props,{info:this.state.info})),2===e&&c.a.createElement(ge,u()({handleSubmit:this.handleSubmit,uuid:this.state.uuid,switchMethod:this.switchMethod},this.props)))))}}]),t}(i.Component),ve=f.a.create({name:"normal_login"})(ye),be=Object(M.connect)(null,{setUserInfo:oe,setStudent:ce})(ve),je=(n(777),n(412)),Se=(n(756),"");function we(){return c.a.createElement("div",{className:"calendar-header flex-center"},c.a.createElement("div",{className:"calendar-header-refresh flex-center",onClick:function(){window.webAdapter.reload()}},c.a.createElement(h.a,{type:"sync",style:{fontSize:"18px",color:"#5fa2ee"}})))}var Ie=function(e){function t(e){var r;return y()(this,t),r=S()(this,I()(t).call(this,e)),C()(D()(r),"filterMonthsCourse",function(t){var n=[];return r.props.courseData.forEach(function(e){ue(e.date,"yyyy-MM-dd")===t&&n.push(e)}),n}),C()(D()(r),"dateCellRender",function(e){var t=e.month()+1<10?"0"+(e.month()+1):e.month()+1,n=e.date()<10?"0"+e.date():e.date(),s=e.year(),a=r.filterMonthsCourse("".concat(s,"-").concat(t,"-").concat(n));return c.a.createElement("ul",{className:"events"},a.map(function(e){return c.a.createElement("div",{key:e.date,className:"date-item"})}))}),C()(D()(r),"onSelect",function(e){var t=e.month()+1<10?"0"+(e.month()+1):e.month()+1,n="".concat(e.year(),"-").concat(t,"-").concat(e.date()<10?"0"+e.date():e.date()),s=de(r.props.courseData,"date",n)||{};Se===e.month()&&r.props.sendCourseDetail({courseData:s})}),C()(D()(r),"onPanelChange",function(e){r.props.changeDate(e)}),r}return O()(t,e),b()(t,[{key:"render",value:function(){return c.a.createElement(i.Fragment,null,c.a.createElement(we,null),c.a.createElement("div",{className:"calendar-wrapper"},c.a.createElement(je.a,{onPanelChange:this.onPanelChange,onSelect:this.onSelect,dateCellRender:this.dateCellRender,fullscreen:!1,ref:"myInput",headerRender:function(e){var n=e.value,s=e.onChange;Se=n.month();var t=n.year();return c.a.createElement("div",{style:{padding:10}},c.a.createElement("div",{className:"flex-center"},c.a.createElement("div",{className:"calendar-caret flex-center",onClick:function(){var e=Se,t=n.clone();t.month(parseInt(--e,10)),s(t)}},c.a.createElement(h.a,{type:"caret-left",style:{fontSize:"20px",color:"#a9a9a9"}})),c.a.createElement("div",{className:"calendar-date"},"".concat(t,"年").concat(Se+1,"月")),c.a.createElement("div",{className:"calendar-caret flex-center",onClick:function(){var e=Se,t=n.clone();t.month(parseInt(++e,10)),s(t)}},c.a.createElement(h.a,{type:"caret-right",style:{fontSize:"20px",color:"#a9a9a9"}}))))}})))}}]),t}(i.Component),Ee=Object(M.connect)(null,{sendCourseDetail:re})(Ie),De=n(1),ke=n.n(De),Oe=(n(767),function(e){function n(e){var t;return y()(this,n),t=S()(this,I()(n).call(this,e)),C()(D()(t),"handleSignOut",function(){window.WCRClassRoom.setUser(""),Router.push("/broadcast/login")}),C()(D()(t),"handleSwitchStudent",function(){t.props.showDialog({status:!0})}),C()(D()(t),"handleAvatar",function(){}),C()(D()(t),"handleGender",function(e){return 1===e.gender?"http://snsimg.ztjystore.cn/1562303034TyAFquWFiu":2===e.gender?"http://snsimg.ztjystore.cn/ztnew/ad/img/2019/07/05/1562291591660101.jpg?imageView2/2/w/720":"http://snsimg.ztjystore.cn/article/2019/07/05/1562281563183957.jpg?imageView2/2/w/720"}),t.state={platform:""},t}return O()(n,e),b()(n,[{key:"componentDidMount",value:function(){this.setState({platform:pe()})}},{key:"render",value:function(){var e=me(this.props.studentInfo,"select",!0);return c.a.createElement("aside",{className:"sidebar-container"},c.a.createElement("div",{className:"sidebar-avatar",style:{background:"url(".concat(this.handleGender(e),") no-repeat")}}),c.a.createElement("div",{className:"sidebar-name"},e.userName),c.a.createElement("ul",{className:"nav"},c.a.createElement("li",{className:"nav-item"},c.a.createElement(h.a,{type:"calendar"}),c.a.createElement("div",{className:"nav-item-title"},"课程表")),"student"===this.state.platform&&c.a.createElement("li",{className:"nav-item",onClick:this.handleSwitchStudent},c.a.createElement(h.a,{type:"team"}),c.a.createElement("div",{className:"nav-item-title"},"切换学生")),c.a.createElement("li",{className:"nav-item",onClick:this.handleSignOut},c.a.createElement(h.a,{type:"logout"}),c.a.createElement("div",{className:"nav-item-title"},"退出登录"))))}}]),n}(i.Component));Oe.propTypes={userInfo:ke.a.object.isRequired},Oe.defaultProps={userInfo:{}};var Ne=Object(M.connect)(function(e){return{studentInfo:e.course.studentInfo}},{showDialog:ie})(Oe),Ce=(n(768),n(413)),Me=(n(770),function(e){function t(e){var n;return y()(this,t),n=S()(this,I()(t).call(this,e)),C()(D()(n),"handleOk",function(e){}),C()(D()(n),"handleStudentInfo",function(t){t.select||n.props.handleDialogSwitchStudent(t.userId),n.state.students.map(function(e){e.select=!1,t.userId===e.userId&&(e.select=!0)});var e=JSON.parse(JSON.stringify(n.props.userInfo));e.subUserInfoVoList=JSON.parse(JSON.stringify(n.state.students)),n.props.setStudent({studentInfo:JSON.parse(JSON.stringify(n.state.students))}),fe("userInfo",encodeURI(JSON.stringify(e)),30),localStorage.setItem("userInfo",JSON.stringify(e)),n.handleLogin(t),n.props.hideDialog({status:!1})}),C()(D()(n),"handleLogin",function(e){window.WCRClassRoom.setUser("");var t={id:e.userId,name:e.userName,password:"0",token:n.props.userInfo.loginToken,avatar:"http://snsimg.ztjystore.cn/ztnew/ad/img/2019/07/05/1562295571719403.png",mobile:e.mobile||0,type:"student"};window.WCRClassRoom.setUser(t)}),C()(D()(n),"handleGender",function(e){return 1===e.gender?"http://snsimg.ztjystore.cn/1562303034TyAFquWFiu":2===e.gender?"http://snsimg.ztjystore.cn/ztnew/ad/img/2019/07/05/1562291591660101.jpg?imageView2/2/w/720":"http://snsimg.ztjystore.cn/article/2019/07/05/1562281563183957.jpg?imageView2/2/w/720"}),C()(D()(n),"handleCancel",function(e){n.props.hideDialog({status:!1})}),n.state={loading:!1,students:[]},n}return O()(t,e),b()(t,[{key:"componentDidMount",value:function(){var e=JSON.parse(localStorage.getItem("userInfo")).subUserInfoVoList;this.setState({students:e})}},{key:"render",value:function(){var n=this;return c.a.createElement("div",null,c.a.createElement(Ce.a,{visible:this.props.status,title:"切换学生",onOk:this.handleOk,onCancel:this.handleCancel,width:"50%",footer:null},c.a.createElement("div",{className:"student"},this.state.students.map(function(e,t){return c.a.createElement("div",{key:t,className:"student-item",onClick:function(){return n.handleStudentInfo(e)}},c.a.createElement("div",{className:"student-item-avatar",style:{background:"url(".concat(n.handleGender(e),") no-repeat")}}),c.a.createElement("div",{className:"student-item-name"},e.userName),e.select&&c.a.createElement("div",{className:"student-item-icon"},"当前"))}))))}}]),t}(i.Component));Object(M.connect)(function(e){return{status:e.course.status}},{showDialog:ie,hideDialog:function(e){return{type:U,payload:ae({},e)}},setStudent:ce})(Me),n(771);function Te(){return c.a.createElement(i.Fragment,null,c.a.createElement("div",{className:"course-header flex-center"},"我的课程"))}function Le(e){var t=e.courseData,n=void 0===t?{}:t,r=(e.userInfo,e.clearInterval);function a(e,t){var n;return{text:{1:"待上课",2:"开课中",3:"已下课",4:"无效",5:"已失效"},color:(n={3:"#e2e2e2"},C()(n,"3","#e2e2e2"),C()(n,"5","#e2e2e2"),C()(n,"1","#a6d4f5"),C()(n,"2","#a6d4f5"),n),button:{1:"进入教室",2:"进入教室",3:"查看回放",4:"无效",5:"已失效"},type:{1:"0",2:"7",3:"2"},courseStatus:{1:1,2:2,3:3,4:-1,5:4}}[t][e]}function s(t){if(1===t.status||2===t.status||3===t.status){var n={institutionId:1014,id:t.id,title:t.title,scenario:a(t.classType,"type"),startTime:t.startTime,endTime:t.endTime,status:a(t.status,"courseStatus"),teacher_name:t.teacher.userName,teacher_id:t.teacher.id,lesson_slide_url:t.broadcastingInfo.lessonSlideUrl,lesson_slide_backup_url:t.broadcastingInfo.lessonSlideBackupUrl};t.actualStartTime&&(n.actualStartTime=t.actualStartTime),3===t.classType&&(n.needLianMai=1,n.record_mode=4),2===t.classType&&(n.students=[],t.broadcastingInfo.students.forEach(function(e){n.students.push({id:e.id,name:e.userName,avatar:e.avatar})}));var e=JSON.parse(localStorage.getItem("userInfo")),s={token:e.loginToken};0<e.subUserInfoVoList.length?s.subUserId=me(e.subUserInfoVoList,"select",!0).userId:s.subUserId=e.userId,console.log(JSON.stringify(s)),WCRClassRoom.joinClassRoom(JSON.stringify(n),function(e){!function(e,t,n){if("startClass"===e.notify){window.WCRClassRoom.web_log(JSON.stringify(e)),console.log("点击上课按钮"),console.log(n.subUserId);var s={token:n.token,subUserId:n.subUserId,notify:"startClass",data:JSON.stringify(e.body)};ne.sendStudioCallback("calendar",s).then(function(e){o({status:1,lesson:t.id,actual_time:t.actualStartTime?ue(t.actualStartTime,"yyyy-MM-dd hh:mm:ss"):ue(e.systemDate,"yyyy-MM-dd hh:mm:ss"),server_time:ue(e.systemDate,"yyyy-MM-dd hh:mm:ss"),notify:"startClass"}),console.log({status:1,lesson:t.id,actual_time:t.actualStartTime?ue(t.actualStartTime,"yyyy-MM-dd hh:mm:ss"):ue(e.systemDate,"yyyy-MM-dd hh:mm:ss"),server_time:ue(e.systemDate,"yyyy-MM-dd hh:mm:ss"),notify:"startClass",time:t.actualStartTime},"--------")}).catch(function(e){o({status:2,lesson:t.id,actual_time:t.actualStartTime?ue(t.actualStartTime,"yyyy-MM-dd hh:mm:ss"):ue(res.systemDate,"yyyy-MM-dd hh:mm:ss"),server_time:ue(res.systemDate,"yyyy-MM-dd hh:mm:ss"),notify:"startClass"})})}else if("endClass"===e.notify){WCRClassRoom.web_log(JSON.stringify(e)),console.log("点击下课按钮");var a={token:n.token,subUserId:n.subUserId,notify:"endClass",data:JSON.stringify(e.body)};ne.sendStudioCallback("calendar",a).then(function(e){o({status:1,lesson:t.id,notify:"endClass"})}).catch(function(e){o({status:2,lesson:t.id,notify:"endClass"})})}else"enterClassRoom"===e.notify?(r(),console.log("进入教室"),WCRClassRoom.web_log(JSON.stringify(e))):"leaveClassRoom"===e.notify?(WCRClassRoom.web_log(JSON.stringify(e)),window.webAdapter.reload(),console.log("离开教室")):"rewardinfo"===e.notify&&console.log(JSON.parse(JSON.stringify(e)))}(e,t,s)})}d.a.warning("该课程".concat(已失效))}function o(e){var t=0<arguments.length&&void 0!==e?e:{},n=t.status,s=t.lesson,a=t.actual_time,r=t.server_time,o=t.notify,i={notify:o,body:{status:n}};"startClass"===o&&(i.body.data={lesson:s,actual_time:a,server_time:r}),"endClass"===o&&(i.body.data={lesson:s}),window.WCRClassRoom.commonNotifyCallback(0,i)}return Object.keys(n).length<1?c.a.createElement(i.Fragment,null,c.a.createElement("div",{className:"no-data"},"暂无课程")):c.a.createElement("ul",{className:"list-item hide-scroll"},n.courseList.map(function(e){return c.a.createElement("li",{key:e.id},c.a.createElement("p",{className:"list-item-title"},e.title),c.a.createElement("p",{className:"list-item-type"},function(e){switch(e){case 1:return"一对一";case 2:return"小班课";case 3:return"大班课";case 4:return"广播课"}}(e.classType),"  ",ue(+new Date(e.startTime.replace(/-/g,"/")),"hh:mm"),"-",ue(+new Date(e.endTime.replace(/-/g,"/")),"hh:mm")),c.a.createElement("p",{className:"list-item-name"},e.teacher.userName),c.a.createElement("div",{className:"list-item-status",style:{backgroundColor:a(e.status,"color")}},a(e.status,"text")),c.a.createElement("dir",{className:"list-item-button"},c.a.createElement("button",{onClick:function(){return s(e)}},a(e.status,"button"))))}))}var Ue=function(e){function t(e){return y()(this,t),S()(this,I()(t).call(this,e))}return O()(t,e),b()(t,[{key:"render",value:function(){var e=this.props,t=e.courseData,n=e.userInfo,s=e.clearInterval;return c.a.createElement(i.Fragment,null,c.a.createElement(Te,{userInfo:n}),c.a.createElement(Le,{userInfo:n,clearInterval:s,courseData:t}))}}]),t}(i.Component),Re=Object(M.connect)(function(e){return{courseData:e.course.courseData}},null)(Ue);n(772);function Ve(e,t){var n=new Date(e),s=n.getMonth()+1,a=n.getFullYear(),r=20;return"startDate"===t?0===--s&&(s=12,--a):(r=10,13===++s&&(s=1,++a)),"".concat(a,"-").concat(s<10?"0"+s:s,"-").concat(r)}var xe=function(e){function t(e){var s;return y()(this,t),s=S()(this,I()(t).call(this,e)),C()(D()(s),"clientRequest",function(){var e=s.props.userInfo,t={token:e.loginToken,startDate:Ve(new Date,"startDate"),endDate:Ve(new Date,"endDate")};0<e.subUserInfoVoList.length?t.subUserId=me(e.subUserInfoVoList,"select",!0).userId:t.subUserId=e.userId,s.props.awaitCourseList(t)}),C()(D()(s),"clearInterval",function(e){s.setState(function(e){clearTimeout(e.interval)})}),C()(D()(s),"changeDate",function(e){var t="".concat(e.year(),"-").concat(e.month()+1<10?"0"+(e.month()+1):e.month()+1,"-").concat(e.date()<10?"0"+e.date():e.date()),n="".concat(e.year(),"-").concat(e.month()+1<10?"0"+(e.month()+1):e.month()+1);s.setState(function(e){e.currentDate=n,e.yearMonth=n,e.changeDate=t,0<s.props.userInfo.subUserInfoVoList.length?s.getCourseList(s.state.studentId||me(s.props.userInfo.subUserInfoVoList,"select",!0).userId):s.getCourseList(s.props.userInfo.userId)})}),C()(D()(s),"getCourseList",function(e){var t={token:s.props.userInfo.loginToken,subUserId:e,startDate:Ve(s.state.yearMonth,"startDate"),endDate:Ve(s.state.yearMonth,"endDate")};0<s.props.userInfo.subUserInfoVoList.length&&(t.subUserId=e),ne.getList("calendar",t).then(function(e){s.setState({courseData:e.calendarList}),s.checkTodayCourse(+new Date(s.state.changeDate))})}),C()(D()(s),"handleDialogSwitchStudent",function(e){s.setState({studentId:e}),s.getCourseList(e)}),C()(D()(s),"checkTodayCourse",function(e){var t=ue(e,"yyyy-MM-dd");console.log(1),s.props.sendCourseDetail({courseData:de(s.state.courseData,"date",t)||{}})}),C()(D()(s),"showLesson",function(){var e=s.props.courseListStore,t={lesson:0,lessonLength:0};return Object.keys(e).length<1||(t.lesson=e.courseList.length,t.lessonLength=e.courseList.filter(function(e){return 1!==e.status&&2!==e.status}).length),t}),s.state={courseData:[],currentDate:new Date,interval:null,yearMonth:ue(+new Date,"yyyy-MM"),changeDate:ue(+new Date,"yyyy-MM-dd"),studentId:""},0<s.props.userInfo.subUserInfoVoList.length?s.props.setStudent({studentInfo:s.props.userInfo.subUserInfoVoList}):s.props.setStudent({studentInfo:[s.props.userInfo]}),s}return O()(t,e),b()(t,[{key:"componentWillMount",value:function(){this.props.courseListStore||(this.clientRequest(),this.setState({courseData:this.props.courseListStore}))}},{key:"componentDidMount",value:function(){console.log(this.props.courseListStore),console.log(this.props.userInfo,"2"),window.resizeTo(1080,650),this.checkTodayCourse(+new Date(this.state.currentDate)),this.setState({})}},{key:"render",value:function(){var e=this.props.userInfo;return c.a.createElement(i.Fragment,null,c.a.createElement("div",{className:"content-layout"},c.a.createElement(Ne,{userInfo:e}),c.a.createElement("div",{className:"content-layout-right flex-center"},c.a.createElement("div",{className:"content-layout-right-box"},c.a.createElement("div",{className:"content-layout-right-caleandar"},c.a.createElement(Ee,{changeDate:this.changeDate,courseData:this.state.courseData})),c.a.createElement("div",{className:"content-layout-right-course"},c.a.createElement(Re,{clearInterval:this.clearInterval,userInfo:e}))),c.a.createElement("div",{className:"content-layout-right-carryout"},"共",this.showLesson().lesson,"节课 | 完成",this.showLesson().lessonLength,"节"))))}}]),t}(i.Component),Pe=Object(M.connect)(function(e){var t=e.course,n=t.courseList;return{courseDataStore:t.courseData,courseListStore:n,userInfo:e.login.userInfo}},{sendCourseDetail:re,setStudent:ce,setUserInfo:oe})(xe);Pe.getInintalProps=function(e,t){var n=JSON.parse(t.userInfo);e.dispatch(oe({userInfo:n}));var s={token:n.loginToken,startDate:Ve(new Date,"startDate"),endDate:Ve(new Date,"endDate")};return 0<n.subUserInfoVoList.length?s.subUserId=me(n.subUserInfoVoList,"select",!0).userId:s.subUserId=n.userId,e.dispatch(le(s))};function ze(){return c.a.createElement(i.Fragment,null,_e.map(function(e){return c.a.createElement(o.Route,e)}))}var _e=[{path:"/",component:be,exact:!0,key:"Home"},{path:"/h5/live/broadcast/login",component:be,key:"login",exact:!0},{path:"/h5/live/broadcast/course",component:Pe,key:"course",exact:!0,loadData:Pe.getInintalProps}],Je=n(66),Fe=n(218);function We(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,s)}return n}function Ge(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?We(n,!0).forEach(function(e){C()(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):We(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var qe={courseData:{},status:!1,studentInfo:{},courseList:{}};function Ae(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,s)}return n}function He(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ae(n,!0).forEach(function(e){C()(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ae(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var $e={userInfo:null,list:[]},Be=Object(Je.combineReducers)({course:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:qe,t=1<arguments.length?arguments[1]:void 0;switch(t.type){case T:return Ge({},e,{},t.payload);case L:case U:case R:case V:return Ge({},e,{},t.payload);default:return e}},login:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:$e,t=1<arguments.length?arguments[1]:void 0;switch(console.log(t,"===============asdasdas"),t.type){case"LOGIN":t.payload;return He({},e,{},t.payload);case"TEST":return He({},e,{},t.payload);default:return e}}});function Ye(){return c.a.createElement(M.Provider,{store:function(){var e=window._REACT_SOTRE?window._REACT_SOTRE:{};return Object(Je.createStore)(Be,e,Object(Je.applyMiddleware)(Fe.a))}()},c.a.createElement(r.BrowserRouter,null,c.a.createElement(ze,null)))}n(774),n(775);a.a.hydrate(c.a.createElement(Ye,null),document.getElementById("root"))}},[[415,1,2]]]);